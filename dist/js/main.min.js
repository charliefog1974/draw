var draw=function(){var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),r=n.getContext("2d"),a=n.getBoundingClientRect(),o=0,i=0,d=0,l=0,c=0,s=0,u=!1,f=!1,g="",h=!1;return{setXY:function(t){u=o,f=i,o=t.clientX-a.left-n.offsetLeft,i=t.clientY-a.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+o,document.getElementById("trackY").innerHTML="Y: "+i},setStart:function(){d=o,l=i},setEnd:function(){c=o,s=i},setShape:function(t){g=t},getShape:function(){return g},setIsDrawing:function(t){h=t},getIsDrawing:function(){return h},draw:function(){r.restore(),"rectangle"===g?(this.drawRect(),document.getElementById("rectangle")):"line"===g?this.drawLine():"path"===g?this.drawPath():"circle"===g?this.drawCircle():"triangle"===g?this.drawTri():alert("Please choose a shape"),r.save()},drawRect:function(){r.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillRect(d,l,c-d,s-l)},drawCircle:function(){r.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16);let t=d-c,e=l-s,n=Math.sqrt(t*t+e*e);r.beginPath(),r.arc(d,l,n,0,2*Math.PI),r.stroke(),r.fill()},drawLine:function(){r.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.beginPath(),r.moveTo(d,l),r.lineTo(c,s),r.stroke()},drawPath:function(){r.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.beginPath(),r.moveTo(u,f),r.lineTo(o,i),r.stroke()},drawTriangle:function(){r.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillRect(d,l,c-d,s-l)},getCanvas:function(){return n},init:function(){n.width=t,n.height=e,document.querySelector("main").appendChild(n)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),document.getElementById("strokeColor").addEventListener("change",function(){draw.setStrokeColor(document.getElementById("strokeColor").value)}),document.getElementById("randStrokeColor").addEventListener("change",function(){draw.setStrokeColor("")}),document.getElementById("fillColor").addEventListener("change",function(){draw.setFillColor(document.getElementById("fillColor").value)}),document.getElementById("randFillColor").addEventListener("change",function(){draw.setFillColor("")});